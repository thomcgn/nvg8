services:
  postgres:
    container_name: nvg8-dev-postgres
    ports:
      - "127.0.0.1:5432:5432"

  backend:
    container_name: nvg8-dev-backend
    environment:
      SPRING_PROFILES_ACTIVE: dev

      # Dev: Cookie ohne Domain + nicht Secure + Lax
      APP_DEV_MODE: "true"
      APP_COOKIE_DOMAIN: ""
      APP_COOKIE_SECURE: "false"
      APP_COOKIE_SAMESITE: "Lax"

      # Dev: Admin bootstrap erlaubt (nur DEV!)
      APP_BOOTSTRAP_ADMIN: "true"
      APP_BOOTSTRAP_ADMIN_EMAIL: "admin@nvg8.de"
      APP_BOOTSTRAP_ADMIN_PASSWORD: "adminNVG8"

      # Dev: CORS localhost
      CORS_ALLOWED_ORIGINS: "http://localhost:3000"

    ports:
      - "127.0.0.1:8080:8080"

  frontend:
    container_name: nvg8-dev-frontend
    environment:
      BACKEND_URL: "http://backend:8080"
    ports:
      - "127.0.0.1:3000:3000"

volumes:
  postgres_data:
    name: nvg8_dev_postgres_data
